<header class="header">
  <div class="left">
    <div class="logo">
      <button class="logo-btn" (click)="goXPShop()">
        <span class="xp">XP</span><span class="shop">Shop</span>
      </button>
    </div>

    <!-- ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ user ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô -->
    <nav class="nav" *ngIf="user?.role === 'user'">
      <a routerLink="/">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <!-- <a routerLink="/allgames">‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a> -->
    </nav>
  </div>

  <!-- üîç Search + Dropdown ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ user ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) -->
  <div class="search-container" *ngIf="user?.role === 'user'">
    <input
      type="text"
      class="search-input"
      placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏Å‡∏°"
      [(ngModel)]="searchText"
      (keyup.enter)="searchGames()"
    />

    <div class="search-actions">
      <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ß‡πà‡∏ô‡∏Ç‡∏¢‡∏≤‡∏¢ -->
      <span
        class="material-symbols-outlined search-icon"
        (click)="searchGames()"
      >
        search
      </span>

      <!-- Dropdown ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó -->
      <div class="category-dropdown">
        <button class="category-selector" (click)="toggleCategoryDropdown()">
          <span>{{ selectedCategory ? selectedCategory.name : '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó' }}</span>
          <span class="material-symbols-outlined">arrow_drop_down</span>
        </button>

        <ul class="category-menu" *ngIf="categoryDropdownOpen">
          <li
            *ngFor="let cat of categories"
            (click)="selectCategory(cat)"
          >
            {{ cat.name }}
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏ß‡∏≤ -->
  <div class="right">
    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö / ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -->
    <div class="actions" *ngIf="!isLoggedIn">
      <button class="btn btn-login" (click)="goLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      <button class="btn btn-register" (click)="goRegister()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
    </div>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div class="user-menu" *ngIf="isLoggedIn && user">
      <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ user -->
      <span class="wallet" *ngIf="user.role === 'user'">
        <span class="material-symbols-outlined">account_balance_wallet</span>
        {{ user.wallet | number:'1.2-2' }}
      </span>

      <!-- Dropdown ‡πÄ‡∏°‡∏ô‡∏π -->
      <div class="dropdown" (click)="toggleDropdown()">
        {{ user.name }}
        <span class="material-symbols-outlined arrow">expand_more</span>

        <ul class="dropdown-menu" *ngIf="dropdownOpen">
          <li (click)="goProfile()">
            <span class="material-symbols-outlined">person</span> ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
          </li>

          <!-- ‚úÖ ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏â‡∏û‡∏≤‡∏∞ User -->
          <ng-container *ngIf="user.role === 'user'">
            <li (click)="goCart()">
              <span class="material-symbols-outlined">shopping_cart</span>
              ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
            </li>
            <li (click)="goHistory()">
              <span class="material-symbols-outlined">history</span>
              ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠
            </li>
            <li (click)="goLibrary()">
              <span class="material-symbols-outlined">sports_esports</span>
              ‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏Å‡∏°
            </li>
          </ng-container>

          <!-- ‚úÖ ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Admin -->
          <ng-container *ngIf="user.role === 'admin'">
            <li (click)="goGameManage()">
              <span class="material-symbols-outlined">dashboard</span>
              ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏°
            </li>
          </ng-container>

          <li (click)="logout()">
            <span class="material-symbols-outlined">logout</span> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
